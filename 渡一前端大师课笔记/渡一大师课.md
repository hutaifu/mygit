+ 为啥渲染进程不用多个线程处理？

![](C:\Users\37145\Desktop\桌面\学习\图片\QQ截图20230706115735.png)
$$

$$

进程 =》内存空间
一个程序启动最少一个进程
进程至少一创建个线程来执行代码，进程开启自动创建一个线程运行代码，叫主线程。主线程可以启动跟多线程。

浏览器主要进程 =》浏览器进程，网络进程，渲染进程。
浏览器进程：
负责界面显示，用户交互，子进程管理

渲染进程：
一个标签页一个渲染进程(可能会改变)=》主线程负责执行html,css,js代码。
处理任务包括不限于：
1.解析html
2.解析css
3.计算样式
4.布局
5.处理图层
6.每秒画60次页面
7.执行全局js代码
8.执行事件处理函数
8.执行计算器回调函数

+ 事件循环
+ 浏览器启动时会有多个进程，每个进程占一部分内存空间，互不干扰，同时会启动浏览器主线程，主线程会立即启动其他线程，例如渲染线程处理渲染进程，网络线程等。主线程处理用户交互触发，网页标签显示以及网页导航栏的一些功能
+ 渲染线程是一个单线程，用来处理html,css,js等页面元素。因为这些内容相互关联，览器的渲染进程之所以不使用多个线程去分别处理页面上的HTML、CSS、JS，是因为这些资源之间存在依赖关系，需要相互协调和交互。同时，多线程处理可能引发竞态条件和数据同步问题，增加了复杂性和难度。因此，浏览器采用单线程的方式来处理这些资源，确保了执行的顺序和可靠性。
+ 因此js也是一个 单线程语言，由于是单线程，就会产生异步的问题，而事件循环是异步的实现方式
+ 事件循环又叫做消息队列，浏览器源码中叫messageLoop,官方描述叫SOP
+ 我们使用一个队列的方式，把一个任务一个任务取出来执行，执行完了之后再取下一个，这就是事件循环，实际上它本质上呢，就是用了一个无限的循环，每一次循环取一个任务执行，执行完了取下一个，下一次循环取下一个
+ 根据w3c规定每个任务都有一个任务类型，相同的任务类型必须在同一队列，不同的任务类型可以在同一队列，以前队列只分为红队列和微队列，微队列优先级最高，但是现在浏览器越来越复杂，两个队列满足不了要求，所有w3c最新规定任务有多个队列，但是微队列一定存在，且微队列优先级最高，就是说先从微队列拿到任务然后去执行，然后就是交互队列和延时队列，现在交互队列是优先级大于延时队列。除了微队列外的其他队列的优先级w3c没有明确的规定，有浏览器自己判断，不同的浏览器或者版本不同可能都不一样，非常复杂。
+ promise的回调函数会加入到微队列
+ settimeout的回调函数会加入到延时队列
+ 渲染主线程在谷歌源码中是一个for（：：）{}的无线循环函数，不断从任务队列里面拿到任务，然后去执行，
+ 浏览器每秒会渲染页面60次，这个任务也是放到任务队列里面去由渲染主线程执行。
